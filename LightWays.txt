DATABASE : LightWays

USERS
(
	USER_LOGIN VARCHAR(30) PRIMARY KEY,
	USER_PASSWORD VARCHAR(50),
	USER_FNAME VARCHAR(30),
	USER_LNAME VARCHAR(30),
	USER_TYPE ENUM{"SUPER","ADMIN","USER"},
	USER_BOSS VARCHAR(30) PRIMARY KEY
);

CARDS
(
	CARD_ID INT(10) PRIMARY KEY AUTO_INCREMENT,
	CARD_NAME VARCHAR(30),
	CARD_IP VARCHAR(30),
	USER_LOGIN VARCHAR(30) FOREIGN KEY fk_user_card
);

FLOORS
(
	FLOOR_ID INT(10) PRIMARY KEY AUTO_INCREMENT,
	FLOOR_NAME VARCHAR(30),
	USER_LOGIN VARCHAR(30) FOREIGN KEY fk_user_floor
);

ROOMS
(
	ROOM_ID INT(10) PRIMARY KEY AUTO_INCREMENT,
	ROOM_NAME VARCHAR(30),
	ROOM_WIDTH INT(2),
	ROOM_HEIGHT INT(2),
	FLOOR_ID INT(10) FOREIGN KEY fk_floor_room
);

GROUPS
(
	GROUP_ID INT(10) PRIMARY KEY AUTO_INCREMENT,
	GROUP_NAME VARCHAR(30),
	GROUP_COLOR VARCHAR(7),
	GROUP_STATUS ENUM{"ON","OFF"},
	ROOM_ID INT(10) FOREIGN KEY fk_room_group
);

DEVICES
(
	DEVICE_ID INT(10) PRIMARY KEY AUTO_INCREMENT,
	DEVICE_PIN INT(2),
	DEVICE_TYPE VARCHAR(20),
	DEVICE_LINE INT(2),
	DEVICE_COLUMN INT(2),
	DEVICE_STATUS ENUM{"ON","OFF"},
	CARD_ID INT(10) FOREIGN KEY fk_card_device,
	ROOM_ID INT(10) FOREIGN KEY fk_room_device,
	GROUP_ID INT(10) FOREIGN KEY fk_group_device
);

PERMISSIONS
(
	PERMISSION_ID INT(10),
	PERMISSION_TYPE ENUM{"FLOOR","ROOM","GROUP","DEVICE"},
	USER_LOGIN VARCHAR(30),
	PRIMARY KEY(PERMISSION_ID,PERMISSION_TYPE,USER_LOGIN)
);

HISTORY
(
	HISTORY_ID INT(100) PRIMARY KEY AUTO_INCREMENT,
	HISTORY_TYPE ENUM{"CONNECT","DISCONNECT","TURNON","TURNOFF","ADD","EDIT","DELETE"},
	HISTORY_DATE DATE,
	HISTORY_TIME TIME,
	HISTORY_OPTION VARCHAR(30),
	HISTORY_USER VARCHAR(30)
);