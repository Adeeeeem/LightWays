DATABASE : LightWays

USERS
(
	USER_LOGIN VARCHAR(30) PRIMARY KEY,
	USER_PASSWORD VARCHAR(50),
	USER_FNAME VARCHAR(30),
	USER_LNAME VARCHAR(30),
	USER_TYPE ENUM{"SUPER","ADMIN","USER"},
	USER_BOSS VARCHAR(30) FOREIGN KEY fk_user_user USERS (USER_LOGIN),
);

CARDS
(
	CARD_ID INT(10) PRIMARY KEY AUTO_INCREMENT,
	CARD_NAME VARCHAR(30),
	CARD_IP VARCHAR(30),
	USER_LOGIN VARCHAR(30) FOREIGN KEY fk_user_card USERS (USER_LOGIN)
);

FLOORS
(
	FLOOR_ID INT(10) PRIMARY KEY AUTO_INCREMENT,
	FLOOR_NAME VARCHAR(30),
	USER_LOGIN VARCHAR(30) FOREIGN KEY fk_user_floor USERS (USER_LOGIN)
);

ROOMS
(
	ROOM_ID INT(10) PRIMARY KEY AUTO_INCREMENT,
	ROOM_NAME VARCHAR(30),
	ROOM_WIDTH INT(2),
	ROOM_HEIGHT INT(2),
	FLOOR_ID INT(10) FOREIGN KEY fk_floor_room FLOORS (FLOOR_ID)
);

GROUPS
(
	GROUP_ID INT(10) PRIMARY KEY AUTO_INCREMENT,
	GROUP_NAME VARCHAR(30),
	GROUP_COLOR VARCHAR(7),
	GROUP_STATUS ENUM{"ON","OFF"},
	ROOM_ID INT(10) FOREIGN KEY fk_room_group ROOMS (ROOM_ID)
);

DEVICES
(
	DEVICE_ID INT(10) PRIMARY KEY AUTO_INCREMENT,
	DEVICE_PIN INT(2),
	DEVICE_TYPE VARCHAR(20),
	DEVICE_LINE INT(2),
	DEVICE_COLUMN INT(2),
	DEVICE_STATUS ENUM{"ON","OFF"},
	CARD_ID INT(10) FOREIGN KEY fk_card_device CARDS (CARD_ID),
	ROOM_ID INT(10) FOREIGN KEY fk_room_device ROOMSS (ROOMS_ID),
	GROUP_ID INT(10) NULL FOREIGN KEY fk_group_device GROUPS (GROUP_ID)
);

PERMISSIONS
(
	PERMISSION_ID INT(10),
	PERMISSION_TYPE ENUM{"FLOOR","ROOM"},
	USER_LOGIN VARCHAR(30) FOREIGN KEY fk_user_permission USERS (USER_LOGIN),
	PRIMARY KEY(PERMISSION_ID,PERMISSION_TYPE,USER_LOGIN)
);

HISTORY
(
	HISTORY_USER VARCHAR(30),
	HISTORY_TYPE ENUM{"CONNECT","DISCONNECT","ON","OFF","ADD","DELETE"},
	HISTORY_DATA_ID VARCHAR(30),
	HISTORY_DATA ENUM{"USER","CARD","FLOOR","ROOM","GROUP","DEVICE"};
	HISTORY_DATE DATE,
	HISTORY_TIME TIME,
	HISTORY_OPTION VARCHAR(100) NULL,
	HISTORY_BOSS VARCHAR(30)
);